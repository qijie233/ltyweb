<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>洛天依喵喵喵！</title>
<link rel="stylesheet" href="https://unpkg.com/mdui@1.0.2/dist/css/mdui.min.css">

</head>
<body><br><br>
    <div class="mdui-container mdui-typo">
        <div class="mdui-row">
            <div class="mdui-card mdui-col-md-1 mdui-col-lg-5"  style="padding: 2em;" id="dong">
                <h1>无情捶打洛天依</h1>
                <h2>喵喵喵~</h2>
                <div class="mdui-ripple" style="width: 80%;" onclick="boom()">
                    <img src="luo_tianyi.png" id="lty"  >
                </div>
            </div>
            <div class="mdui-card mdui-col-md-1 mdui-col-lg-6"  style="padding: 2em">
                <h1>捶打次数：<span style="float: right;" id="cishu"></span></h1>
                <div class="mdui-progress">
                     <div class="mdui-progress-determinate" style="width: 0%;" id="chuid"></div>
                </div>
                 <h1>小笼包：<span style="float: right;" id="geshu"></span></h1>
                <div class="mdui-progress">
                     <div class="mdui-progress-determinate" style="width: 0%;" id="chid"></div>
                </div>
                

                <h2 id="is_yunle"></h2>
            <!-- <p>灵感来自<a href="https://hdgxl.com">顾小林</a></p>-->
            </div>
        </div>
    </div>
     <div class="mdui-dialog" id="xlbmvp">
      <div class="mdui-dialog-title">吃饱了！</div>
      <div class="mdui-dialog-content">
        <h1>洛天依抢走你手上的5个小笼包！</h1>
        <h2>不过，你可以<b>免费</b>观看一场来自洛天依(?)的演唱会！</h2>
      </div>
      <div class="mdui-dialog-actions">
        <button class="mdui-btn mdui-ripple" mdui-dialog-cancel>哦</button>
        <button class="mdui-btn mdui-ripple" onclick="window.open(`https://www.bilibili.com/video/BV1GJ411x7h7/`)">康康！</button>
      </div>
    </div>
</body>
<script>
    const lty =  document.getElementById("lty");
    var is_cd=true;
    const miao = new Audio('喵.mp3');
    if (localStorage.getItem("chuid") == null || localStorage.getItem("chid") == null) { 
        localStorage.setItem("chuid",0)
        localStorage.setItem("chid",0)
    }
    document.getElementById("chuid").style.width = localStorage.getItem("chuid")*5+"%";
    document.getElementById("cishu").innerHTML = localStorage.getItem("chuid");

    document.getElementById("chid").style.width = localStorage.getItem("chid")*20+"%";
    document.getElementById("geshu").innerHTML = localStorage.getItem("chid");

    //===================初始化
    function boom(){
        if (is_cd){ 
           
            localStorage.setItem("chuid",parseInt(localStorage.getItem("chuid"))+1);
           lty.src = "lty.gif"
            setTimeout(function(){
               lty.src = "luo_tianyi.png";
              
            },500)
            
            document.getElementById("cishu").innerHTML = localStorage.getItem("chuid");
            document.getElementById("chuid").style.width = localStorage.getItem("chuid")*5+"%";
            if (localStorage.getItem("chuid") >= 20) {
                localStorage.setItem("chuid",0);
                xiaolongb()
             }
              miao.play(); 
             return 0;
        }
        mdui.snackbar("喵喵喵，小洛晕了呢~")
    }
    function xiaolongb(){
        mdui.snackbar("喵喵喵，小洛被锤晕了捏~")
        is_cd=false
        document.getElementById("is_yunle").innerHTML=`小洛晕了呢~`
        if (localStorage.getItem("chid") >= 5) {
                localStorage.setItem("chid",0);
                new mdui.Dialog('#xlbmvp',{"modal":true}).open()
             }
        setTimeout( function(){
            is_cd=true;
            document.getElementById("is_yunle").innerHTML=`醒了！一个小笼包！`
            localStorage.setItem("chid",parseInt(localStorage.getItem("chid"))+1)
            document.getElementById("chid").style.width = localStorage.getItem("chid")*20+"%";
            document.getElementById("geshu").innerHTML = localStorage.getItem("chid");
        },3000)
    }
</script>
<script src="https://unpkg.com/mdui@1.0.2/dist/js/mdui.min.js"></script>
</html>
